(()=>{"use strict";class t{constructor(t,s,i,e=0,h=0){this.y=s,this.x=t,this.img=new Image,this.img.src=i,this.shiftX=e,this.shiftY=h}get width(){return this.img.width}get height(){return this.img.height}move(){this.x=this.x+this.shiftX,this.y=this.y+this.shiftY}draw(t){t.drawImage(this.img,this.x,this.y)}stopMoving(){this.shiftX=0,this.shiftY=0}}class s extends t{constructor(t,s,i){super(t,s,"./images/balle24.png",8,4),this.theGame=i}move(){this.theGame.scores;const t=this.theGame.paddleLeft,s=this.theGame.paddleRight;this.y<=0||this.y+this.height>=this.theGame.canvas.height?this.shiftY=-this.shiftY:this.x>=t.x+t.width&&this.x<=t.x+t.width+10&&this.y>=t.y-5&&this.y<=t.y+t.height+5||this.x<=s.x+s.width&&this.x>=s.x-10&&this.y>=s.y-5&&this.y<=s.y+s.height+5?this.shiftX=-this.shiftX:(this.x<=0||this.x+this.width>=this.theGame.canvas.width)&&this.stopMoving(),super.move()}}class i extends t{constructor(t,s,i){super(t,s,"./images/paddle.png",0,50),this.theGame=i}moveUp(){this.y<=0?this.shiftY=-this.shiftY:(this.shiftY>0&&(this.shiftY=-this.shiftY),super.move())}moveDown(){this.y+this.height>=this.theGame.canvas.height?this.shiftY=-this.shiftY:(this.shiftY<0&&(this.shiftY=-this.shiftY),super.move())}}class e{constructor(t){this.raf=null,this.canvas=t,this.ball=new s(this.canvas.width/2,this.canvas.height/2,this),this.paddleLeft=new i(10,this.canvas.height/2,this),this.paddleRight=new i(this.canvas.width-37,this.canvas.height/2,this)}start(){this.animate(),this.initPaddle()}stop(){window.cancelAnimationFrame(this.raf),this.ball.x<=0?(console.log("Point pour j2"),MY.player2Score+=1):this.ball.x+this.ball.width>=this.canvas.width&&(MY.player1Score+=1,console.log("Point pour j1")),document.getElementById("scores").innerHTML=`${MY.player1Score} : ${MY.player2Score}`}initPaddle(){document.addEventListener("keydown",(t=>{t.preventDefault(),console.log("Key pressed : ",t.key),"ArrowUp"==t.key?(this.paddleRight.moveUp(),this.moveAndDraw()):"ArrowDown"==t.key?(this.paddleRight.moveDown(),this.moveAndDraw()):"z"==t.key?(this.paddleLeft.moveUp(),this.moveAndDraw()):"s"==t.key&&(this.paddleLeft.moveDown(),this.moveAndDraw())}))}animate(){this.moveAndDraw(),this.raf=window.requestAnimationFrame(this.animate.bind(this))}moveAndDraw(){const t=this.canvas.getContext("2d");t.clearRect(0,0,this.canvas.width,this.canvas.height),this.ball.move(),this.ball.draw(t),this.paddleLeft.draw(t),this.paddleRight.draw(t)}}const h=document.getElementById("field");window.addEventListener("load",(()=>{window.MY={},MY.player1Score=0,MY.player2Score=0;const t=new e(h);document.getElementById("start").addEventListener("click",(()=>n(t)))}));let a=!1;const n=t=>{a?(0==t.ball.shiftX&&0==t.ball.shiftY?document.getElementById("start").value="rejouer":document.getElementById("start").value="jouer",t.stop()):(0==t.ball.shiftX&&(t=new e(h)),t.start(),document.getElementById("start").value="stop"),a=!a}})();